<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Display Control Center - IPIS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slide-in-left {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }
    
    @keyframes slide-in-right {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }
    
    @keyframes slide-in-up {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    
    @keyframes slide-in-down {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }
    
    @keyframes zoom-in {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes zoom-out {
      from { transform: scale(1.2); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes wipe-left {
      from { clip-path: inset(0 100% 0 0); }
      to { clip-path: inset(0 0 0 0); }
    }
    
    @keyframes wipe-right {
      from { clip-path: inset(0 0 0 100%); }
      to { clip-path: inset(0 0 0 0); }
    }
    
    @keyframes dissolve {
      from { opacity: 0; filter: blur(10px); }
      to { opacity: 1; filter: blur(0); }
    }
    
    .animate-fade-in { animation: fade-in 0.5s ease-out; }
    .animate-slide-in-left { animation: slide-in-left 0.5s ease-out; }
    .animate-slide-in-right { animation: slide-in-right 0.5s ease-out; }
    .animate-slide-in-up { animation: slide-in-up 0.5s ease-out; }
    .animate-slide-in-down { animation: slide-in-down 0.5s ease-out; }
    .animate-zoom-in { animation: zoom-in 0.5s ease-out; }
    .animate-zoom-out { animation: zoom-out 0.5s ease-out; }
    .animate-wipe-left { animation: wipe-left 0.5s ease-out; }
    .animate-wipe-right { animation: wipe-right 0.5s ease-out; }
    .animate-dissolve { animation: dissolve 0.5s ease-out; }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #1e293b;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }

    /* Loading spinner */
    .loading-spinner {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 3px solid #06b6d4;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel" data-type="module">
    const { useState, useEffect, useRef } = React;
    
    // Lucide React Icons (inline SVG components)
    const Play = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const Pause = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const RotateCcw = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
      </svg>
    );
    
    const Plus = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
      </svg>
    );
    
    const Trash2 = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
      </svg>
    );
    
    const Edit2 = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
      </svg>
    );
    
    const Eye = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
      </svg>
    );
    
    const Save = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
      </svg>
    );
    
    const Upload = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
    );
    
    const Clock = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const MessageSquare = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
    );
    
    const Settings = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
    );
    
    const Monitor = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
    );
    
    const PlayCircle = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    );
    
    const ImageIcon = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    );
    
    const VideoIcon = () => (
      <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
      </svg>
    );

    // Transition effects
    const transitionEffects = [
      'fade',
      'slide-left',
      'slide-right',
      'slide-up',
      'slide-down',
      'zoom-in',
      'zoom-out',
      'wipe-left',
      'wipe-right',
      'dissolve'
    ];

    // Main Component
    const VideoDisplaySoftware = () => {
      // State Management
      const [playlists, setPlaylists] = useState([
        {
          id: 'playlist-1',
          name: 'Default Playlist',
          items: [],
          createdAt: new Date()
        }
      ]);
      const [currentPlaylist, setCurrentPlaylist] = useState('playlist-1');
      const [displayBoards, setDisplayBoards] = useState([
        {
          id: 'board-1',
          name: 'Platform 1 Display',
          resolution: { width: 1920, height: 1080 },
          status: 'online',
          currentPlaylist: 'playlist-1'
        },
        {
          id: 'board-2',
          name: 'Platform 2 Display',
          resolution: { width: 1280, height: 720 },
          status: 'online'
        }
      ]);
      const [selectedBoard, setSelectedBoard] = useState('board-1');
      const [specialMessages, setSpecialMessages] = useState([]);
      const [trainData, setTrainData] = useState([
        {
          trainNumber: '12345',
          trainName: 'Rajdhani Express',
          arrival: '14:30',
          departure: '14:45',
          platform: '1',
          status: 'On Time'
        },
        {
          trainNumber: '67890',
          trainName: 'Shatabdi Express',
          arrival: '15:00',
          departure: '15:15',
          platform: '2',
          status: 'Delayed 10 min'
        }
      ]);

      // UI State
      const [activeTab, setActiveTab] = useState('playlist');
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentItemIndex, setCurrentItemIndex] = useState(0);
      const [showAddPlaylistModal, setShowAddPlaylistModal] = useState(false);
      const [showMessageModal, setShowMessageModal] = useState(false);
      const [fitToScreen, setFitToScreen] = useState(true);
      const [maintainAspectRatio, setMaintainAspectRatio] = useState(true);

      // Form States
      const [newPlaylistName, setNewPlaylistName] = useState('');
      const [newMessage, setNewMessage] = useState({
        language: 'en',
        fontSize: 24,
        color: '#FFFFFF',
        displayType: 'stay',
        duration: 5,
        position: 'bottom'
      });
      const [editingItem, setEditingItem] = useState(null);

      // Refs
      const videoRef = useRef(null);
      const timerRef = useRef(null);

      // Get current playlist
      const getCurrentPlaylist = () => playlists.find(p => p.id === currentPlaylist);

      // Add new playlist
      const handleAddPlaylist = () => {
        if (newPlaylistName.trim()) {
          const newPlaylist = {
            id: `playlist-${Date.now()}`,
            name: newPlaylistName,
            items: [],
            createdAt: new Date()
          };
          setPlaylists([...playlists, newPlaylist]);
          setNewPlaylistName('');
          setShowAddPlaylistModal(false);
        }
      };

      // Delete playlist
      const handleDeletePlaylist = (playlistId) => {
        if (playlists.length > 1) {
          setPlaylists(playlists.filter(p => p.id !== playlistId));
          if (currentPlaylist === playlistId) {
            setCurrentPlaylist(playlists[0].id);
          }
        }
      };

      // Add media item to playlist
      const handleAddMediaItem = (file) => {
        const playlist = getCurrentPlaylist();
        if (!playlist) return;

        const fileType = file.type.startsWith('image/') ? 'image' : 'video';
        const format = file.name.split('.').pop() || '';
        
        const newItem = {
          id: `item-${Date.now()}`,
          name: file.name,
          type: fileType,
          format: format,
          url: URL.createObjectURL(file),
          duration: fileType === 'image' ? 5 : 10,
          transitionEffect: fileType === 'image' ? 'fade' : undefined,
          repeatCount: 1
        };

        const updatedPlaylist = {
          ...playlist,
          items: [...playlist.items, newItem]
        };

        setPlaylists(playlists.map(p => p.id === currentPlaylist ? updatedPlaylist : p));
      };

      // Remove media item
      const handleRemoveItem = (itemId) => {
        const playlist = getCurrentPlaylist();
        if (!playlist) return;

        const updatedPlaylist = {
          ...playlist,
          items: playlist.items.filter(item => item.id !== itemId)
        };

        setPlaylists(playlists.map(p => p.id === currentPlaylist ? updatedPlaylist : p));
      };

      // Update media item
      const handleUpdateItem = (itemId, updates) => {
        const playlist = getCurrentPlaylist();
        if (!playlist) return;

        const updatedPlaylist = {
          ...playlist,
          items: playlist.items.map(item => 
            item.id === itemId ? { ...item, ...updates } : item
          )
        };

        setPlaylists(playlists.map(p => p.id === currentPlaylist ? updatedPlaylist : p));
      };

      // Add special message
      const handleAddMessage = () => {
        if (newMessage.text) {
          const message = {
            id: `msg-${Date.now()}`,
            ...newMessage
          };
          setSpecialMessages([...specialMessages, message]);
          setNewMessage({
            language: 'en',
            fontSize: 24,
            color: '#FFFFFF',
            displayType: 'stay',
            duration: 5,
            position: 'bottom'
          });
          setShowMessageModal(false);
        }
      };

      // Remove special message
      const handleRemoveMessage = (messageId) => {
        setSpecialMessages(specialMessages.filter(m => m.id !== messageId));
      };

      // Playlist playback logic
      useEffect(() => {
        if (!isPlaying) return;

        const playlist = getCurrentPlaylist();
        if (!playlist || playlist.items.length === 0) return;

        const currentItem = playlist.items[currentItemIndex];
        if (!currentItem) return;

        if (currentItem.type === 'image') {
          timerRef.current = setTimeout(() => {
            handleNextItem();
          }, currentItem.duration * 1000);
        }

        return () => {
          if (timerRef.current) {
            clearTimeout(timerRef.current);
          }
        };
      }, [isPlaying, currentItemIndex, currentPlaylist]);

      // Handle video ended
      const handleVideoEnded = () => {
        handleNextItem();
      };

      // Move to next item
      const handleNextItem = () => {
        const playlist = getCurrentPlaylist();
        if (!playlist || playlist.items.length === 0) return;

        const nextIndex = (currentItemIndex + 1) % playlist.items.length;
        setCurrentItemIndex(nextIndex);
      };

      // Play/Pause control
      const togglePlayback = () => {
        setIsPlaying(!isPlaying);
        if (videoRef.current) {
          if (isPlaying) {
            videoRef.current.pause();
          } else {
            videoRef.current.play();
          }
        }
      };

      // Reset playback
      const resetPlayback = () => {
        setCurrentItemIndex(0);
        setIsPlaying(false);
        if (videoRef.current) {
          videoRef.current.pause();
          videoRef.current.currentTime = 0;
        }
      };

      // Push to display board
      const pushToBoard = (boardId, playlistId) => {
        setDisplayBoards(displayBoards.map(board => 
          board.id === boardId ? { ...board, currentPlaylist: playlistId } : board
        ));
      };

      // Render current media item
      const renderMediaItem = (item, isPreview = false) => {
        const containerStyle = fitToScreen && maintainAspectRatio
          ? { objectFit: 'contain' }
          : fitToScreen
          ? { objectFit: 'fill' }
          : { objectFit: 'none' };

        if (item.type === 'image') {
          return (
            <img
              src={item.url}
              alt={item.name}
              className={`w-full h-full transition-all duration-500 animate-${item.transitionEffect || 'fade-in'}`}
              style={containerStyle}
            />
          );
        } else {
          return (
            <video
              ref={isPreview ? null : videoRef}
              src={item.url}
              className="w-full h-full"
              style={containerStyle}
              onEnded={handleVideoEnded}
              autoPlay={!isPreview && isPlaying}
              loop={item.repeatCount === -1}
            />
          );
        }
      };

      // Render special messages overlay
      const renderSpecialMessages = () => {
        return specialMessages.map(msg => (
          <div
            key={msg.id}
            className={`absolute ${msg.position === 'bottom' ? 'bottom-0' : 'top-0'} left-0 right-0 px-8 py-4 bg-black bg-opacity-80 ${
              msg.displayType === 'flash' ? 'animate-pulse' : ''
            }`}
            style={{
              fontSize: `${msg.fontSize}px`,
              color: msg.color
            }}
          >
            <p className="text-center font-semibold">{msg.text}</p>
          </div>
        ));
      };

      const playlist = getCurrentPlaylist();
      const currentItem = playlist && playlist.items[currentItemIndex];
      const selectedBoardData = displayBoards.find(b => b.id === selectedBoard);

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white">
          {/* Header */}
          <header className="border-b border-slate-700 bg-slate-900/50 backdrop-blur-sm sticky top-0 z-40">
            <div className="container mx-auto px-6 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-cyan-500/20">
                    <Monitor />
                  </div>
                  <div>
                    <h1 className="text-2xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                      Video Display Control Center
                    </h1>
                    <p className="text-sm text-slate-400">Integrated Passenger Information System</p>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <div className="px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-lg">
                    <span className="text-green-400 text-sm font-semibold">● SYSTEM ONLINE</span>
                  </div>
                </div>
              </div>
            </div>
          </header>

          {/* Navigation Tabs */}
          <div className="border-b border-slate-700 bg-slate-900/30">
            <div className="container mx-auto px-6">
              <div className="flex gap-2">
                {[
                  { id: 'playlist', label: 'Playlists', Icon: PlayCircle },
                  { id: 'schedule', label: 'Schedule', Icon: Clock },
                  { id: 'preview', label: 'Preview', Icon: Eye },
                  { id: 'messages', label: 'Special Messages', Icon: MessageSquare },
                  { id: 'boards', label: 'Display Boards', Icon: Monitor },
                  { id: 'train', label: 'Train Info', Icon: Settings }
                ].map(tab => (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={`flex items-center gap-2 px-6 py-3 border-b-2 transition-all ${
                      activeTab === tab.id
                        ? 'border-cyan-500 text-cyan-400 bg-cyan-500/10'
                        : 'border-transparent text-slate-400 hover:text-white hover:bg-slate-800/50'
                    }`}
                  >
                    <div className="w-4 h-4"><tab.Icon /></div>
                    <span className="font-medium">{tab.label}</span>
                  </button>
                ))}
              </div>
            </div>
          </div>

          {/* Main Content */}
          <main className="container mx-auto px-6 py-8">
            {/* Playlist Tab */}
            {activeTab === 'playlist' && (
              <div className="grid grid-cols-12 gap-6">
                {/* Playlist Selector */}
                <div className="col-span-3 space-y-4">
                  <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                    <div className="flex items-center justify-between mb-4">
                      <h2 className="text-lg font-semibold">Playlists</h2>
                      <button
                        onClick={() => setShowAddPlaylistModal(true)}
                        className="p-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg transition-colors"
                      >
                        <div className="w-4 h-4"><Plus /></div>
                      </button>
                    </div>
                    <div className="space-y-2">
                      {playlists.map(pl => (
                        <div
                          key={pl.id}
                          className={`p-3 rounded-lg border cursor-pointer transition-all ${
                            currentPlaylist === pl.id
                              ? 'border-cyan-500 bg-cyan-500/10'
                              : 'border-slate-600 hover:border-slate-500 bg-slate-700/30'
                          }`}
                          onClick={() => setCurrentPlaylist(pl.id)}
                        >
                          <div className="flex items-center justify-between">
                            <div className="flex-1">
                              <p className="font-medium">{pl.name}</p>
                              <p className="text-xs text-slate-400">{pl.items.length} items</p>
                            </div>
                            {playlists.length > 1 && (
                              <button
                                onClick={(e) => {
                                  e.stopPropagation();
                                  handleDeletePlaylist(pl.id);
                                }}
                                className="p-1 text-red-400 hover:bg-red-500/20 rounded"
                              >
                                <div className="w-4 h-4"><Trash2 /></div>
                              </button>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>

                {/* Playlist Items */}
                <div className="col-span-9">
                  <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                    <div className="flex items-center justify-between mb-6">
                      <h2 className="text-xl font-semibold">
                        {playlist?.name} - Media Items
                      </h2>
                      <div className="flex gap-3">
                        <label className="px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg cursor-pointer transition-colors flex items-center gap-2">
                          <div className="w-4 h-4"><Upload /></div>
                          <span className="font-medium">Add Media</span>
                          <input
                            type="file"
                            accept=".bmp,.jpeg,.jpg,.png,.tiff,.mpeg,.mp4,.wmv,.dat,.avi,.mov"
                            className="hidden"
                            onChange={(e) => {
                              const file = e.target.files?.[0];
                              if (file) handleAddMediaItem(file);
                            }}
                          />
                        </label>
                      </div>
                    </div>

                    {playlist && playlist.items.length === 0 ? (
                      <div className="text-center py-16 text-slate-400">
                        <div className="w-16 h-16 mx-auto mb-4 opacity-30"><ImageIcon /></div>
                        <p>No media items in this playlist</p>
                        <p className="text-sm mt-2">Add images or videos to get started</p>
                      </div>
                    ) : (
                      <div className="space-y-3">
                        {playlist?.items.map((item, index) => (
                          <div
                            key={item.id}
                            className="bg-slate-700/50 border border-slate-600 rounded-lg p-4 hover:border-slate-500 transition-all"
                          >
                            <div className="flex items-center gap-4">
                              <div className="w-12 h-12 bg-slate-600 rounded-lg flex items-center justify-center">
                                {item.type === 'image' ? (
                                  <div className="w-6 h-6 text-cyan-400"><ImageIcon /></div>
                                ) : (
                                  <div className="w-6 h-6 text-purple-400"><VideoIcon /></div>
                                )}
                              </div>
                              <div className="flex-1">
                                <p className="font-medium">{item.name}</p>
                                <p className="text-sm text-slate-400">
                                  {item.type.toUpperCase()} • {item.format} • {item.duration}s
                                  {item.transitionEffect && ` • ${item.transitionEffect}`}
                                </p>
                              </div>
                              <div className="flex items-center gap-2">
                                <button
                                  onClick={() => setEditingItem(item)}
                                  className="p-2 text-cyan-400 hover:bg-cyan-500/20 rounded-lg transition-colors"
                                >
                                  <div className="w-4 h-4"><Edit2 /></div>
                                </button>
                                <button
                                  onClick={() => handleRemoveItem(item.id)}
                                  className="p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors"
                                >
                                  <div className="w-4 h-4"><Trash2 /></div>
                                </button>
                              </div>
                            </div>

                            {/* Edit Mode */}
                            {editingItem?.id === item.id && (
                              <div className="mt-4 pt-4 border-t border-slate-600 grid grid-cols-2 gap-4">
                                <div>
                                  <label className="block text-sm text-slate-400 mb-2">Duration (seconds)</label>
                                  <input
                                    type="number"
                                    value={item.duration}
                                    onChange={(e) => handleUpdateItem(item.id, { duration: parseInt(e.target.value) || 5 })}
                                    className="w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg focus:outline-none focus:border-cyan-500"
                                  />
                                </div>
                                {item.type === 'image' && (
                                  <div>
                                    <label className="block text-sm text-slate-400 mb-2">Transition Effect</label>
                                    <select
                                      value={item.transitionEffect}
                                      onChange={(e) => handleUpdateItem(item.id, { transitionEffect: e.target.value })}
                                      className="w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg focus:outline-none focus:border-cyan-500"
                                    >
                                      {transitionEffects.map(effect => (
                                        <option key={effect} value={effect}>{effect}</option>
                                      ))}
                                    </select>
                                  </div>
                                )}
                                <div>
                                  <label className="block text-sm text-slate-400 mb-2">Repeat Count</label>
                                  <input
                                    type="number"
                                    value={item.repeatCount}
                                    onChange={(e) => handleUpdateItem(item.id, { repeatCount: parseInt(e.target.value) || 1 })}
                                    className="w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg focus:outline-none focus:border-cyan-500"
                                    placeholder="-1 for infinite"
                                  />
                                </div>
                                <div className="flex items-end">
                                  <button
                                    onClick={() => setEditingItem(null)}
                                    className="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors w-full flex items-center justify-center gap-2"
                                  >
                                    <div className="w-4 h-4"><Save /></div>
                                    Save
                                  </button>
                                </div>
                              </div>
                            )}
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              </div>
            )}

            {/* Schedule Tab */}
            {activeTab === 'schedule' && (
              <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                <h2 className="text-xl font-semibold mb-6">Playlist Schedule Configuration</h2>
                <div className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Select Playlist</label>
                      <select
                        value={currentPlaylist}
                        onChange={(e) => setCurrentPlaylist(e.target.value)}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      >
                        {playlists.map(pl => (
                          <option key={pl.id} value={pl.id}>{pl.name}</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Select Display Board</label>
                      <select
                        value={selectedBoard}
                        onChange={(e) => setSelectedBoard(e.target.value)}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      >
                        {displayBoards.map(board => (
                          <option key={board.id} value={board.id}>
                            {board.name} ({board.resolution.width}x{board.resolution.height})
                          </option>
                        ))}
                      </select>
                    </div>
                  </div>

                  <div className="bg-slate-700/50 rounded-lg p-4">
                    <h3 className="font-semibold mb-3">Display Settings</h3>
                    <div className="space-y-3">
                      <label className="flex items-center gap-3 cursor-pointer">
                        <input
                          type="checkbox"
                          checked={fitToScreen}
                          onChange={(e) => setFitToScreen(e.target.checked)}
                          className="w-5 h-5 rounded bg-slate-600 border-slate-500 text-cyan-600 focus:ring-cyan-500"
                        />
                        <span>Fit to Display Board</span>
                      </label>
                      <label className="flex items-center gap-3 cursor-pointer">
                        <input
                          type="checkbox"
                          checked={maintainAspectRatio}
                          onChange={(e) => setMaintainAspectRatio(e.target.checked)}
                          className="w-5 h-5 rounded bg-slate-600 border-slate-500 text-cyan-600 focus:ring-cyan-500"
                        />
                        <span>Maintain Aspect Ratio</span>
                      </label>
                    </div>
                  </div>

                  <button
                    onClick={() => pushToBoard(selectedBoard, currentPlaylist)}
                    className="w-full px-6 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 rounded-lg font-semibold transition-all shadow-lg shadow-cyan-500/20"
                  >
                    Push Schedule to Display Board
                  </button>
                </div>
              </div>
            )}

            {/* Preview Tab */}
            {activeTab === 'preview' && (
              <div className="space-y-6">
                <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                  <h2 className="text-xl font-semibold mb-6">Live Preview</h2>
                  
                  {/* Preview Controls */}
                  <div className="bg-slate-700/50 rounded-lg p-4 mb-4">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-4">
                        <button
                          onClick={togglePlayback}
                          className="p-3 bg-cyan-600 hover:bg-cyan-700 rounded-lg transition-colors"
                        >
                          <div className="w-5 h-5">{isPlaying ? <Pause /> : <Play />}</div>
                        </button>
                        <button
                          onClick={resetPlayback}
                          className="p-3 bg-slate-600 hover:bg-slate-500 rounded-lg transition-colors"
                        >
                          <div className="w-5 h-5"><RotateCcw /></div>
                        </button>
                        <div className="text-sm">
                          <span className="text-slate-400">Item:</span>
                          <span className="ml-2 font-semibold">{currentItemIndex + 1} / {playlist?.items.length || 0}</span>
                        </div>
                        {currentItem && (
                          <div className="text-sm">
                            <span className="text-slate-400">Current:</span>
                            <span className="ml-2 font-semibold">{currentItem.name}</span>
                          </div>
                        )}
                      </div>
                      <div className="text-sm text-slate-400">
                        {selectedBoardData && `${selectedBoardData.resolution.width}x${selectedBoardData.resolution.height}`}
                      </div>
                    </div>
                  </div>

                  {/* Preview Display */}
                  <div className="relative bg-black rounded-lg overflow-hidden" style={{ aspectRatio: '16/9' }}>
                    {currentItem ? (
                      <>
                        {renderMediaItem(currentItem)}
                        {renderSpecialMessages()}
                      </>
                    ) : (
                      <div className="flex items-center justify-center h-full text-slate-400">
                        <div className="text-center">
                          <div className="w-16 h-16 mx-auto mb-4 opacity-30"><Monitor /></div>
                          <p>No media to preview</p>
                          <p className="text-sm mt-2">Add items to playlist to preview</p>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            )}

            {/* Special Messages Tab */}
            {activeTab === 'messages' && (
              <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-xl font-semibold">Special Messages</h2>
                  <button
                    onClick={() => setShowMessageModal(true)}
                    className="px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg transition-colors flex items-center gap-2"
                  >
                    <div className="w-4 h-4"><Plus /></div>
                    Add Message
                  </button>
                </div>

                <div className="space-y-3">
                  {specialMessages.length === 0 ? (
                    <div className="text-center py-16 text-slate-400">
                      <div className="w-16 h-16 mx-auto mb-4 opacity-30"><MessageSquare /></div>
                      <p>No special messages configured</p>
                    </div>
                  ) : (
                    specialMessages.map(msg => (
                      <div key={msg.id} className="bg-slate-700/50 border border-slate-600 rounded-lg p-4">
                        <div className="flex items-start justify-between">
                          <div className="flex-1">
                            <p className="font-medium" style={{ color: msg.color, fontSize: `${msg.fontSize}px` }}>
                              {msg.text}
                            </p>
                            <div className="flex gap-4 mt-2 text-sm text-slate-400">
                              <span>Language: {msg.language.toUpperCase()}</span>
                              <span>Type: {msg.displayType}</span>
                              <span>Duration: {msg.duration}s</span>
                              <span>Position: {msg.position}</span>
                            </div>
                          </div>
                          <button
                            onClick={() => handleRemoveMessage(msg.id)}
                            className="p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors"
                          >
                            <div className="w-4 h-4"><Trash2 /></div>
                          </button>
                        </div>
                      </div>
                    ))
                  )}
                </div>
              </div>
            )}

            {/* Display Boards Tab */}
            {activeTab === 'boards' && (
              <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                <h2 className="text-xl font-semibold mb-6">Display Boards Network</h2>
                <div className="grid grid-cols-2 gap-4">
                  {displayBoards.map(board => (
                    <div key={board.id} className="bg-slate-700/50 border border-slate-600 rounded-lg p-6">
                      <div className="flex items-start justify-between mb-4">
                        <div>
                          <h3 className="text-lg font-semibold">{board.name}</h3>
                          <p className="text-sm text-slate-400">
                            {board.resolution.width}x{board.resolution.height}
                          </p>
                        </div>
                        <div className={`px-3 py-1 rounded-full text-xs font-semibold ${
                          board.status === 'online'
                            ? 'bg-green-500/20 text-green-400 border border-green-500/30'
                            : 'bg-red-500/20 text-red-400 border border-red-500/30'
                        }`}>
                          {board.status.toUpperCase()}
                        </div>
                      </div>
                      {board.currentPlaylist && (
                        <div className="bg-slate-600/50 rounded-lg p-3">
                          <p className="text-xs text-slate-400 mb-1">Active Playlist:</p>
                          <p className="font-medium">
                            {playlists.find(p => p.id === board.currentPlaylist)?.name || 'Unknown'}
                          </p>
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* Train Info Tab */}
            {activeTab === 'train' && (
              <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6">
                <h2 className="text-xl font-semibold mb-6">Train Arrival/Departure Information</h2>
                <div className="overflow-x-auto">
                  <table className="w-full">
                    <thead>
                      <tr className="border-b border-slate-600">
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Train No.</th>
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Train Name</th>
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Arrival</th>
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Departure</th>
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Platform</th>
                        <th className="text-left py-3 px-4 text-slate-400 font-medium">Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      {trainData.map((train, index) => (
                        <tr key={index} className="border-b border-slate-700/50 hover:bg-slate-700/30">
                          <td className="py-3 px-4 font-mono">{train.trainNumber}</td>
                          <td className="py-3 px-4 font-medium">{train.trainName}</td>
                          <td className="py-3 px-4">{train.arrival}</td>
                          <td className="py-3 px-4">{train.departure}</td>
                          <td className="py-3 px-4">
                            <span className="px-2 py-1 bg-cyan-500/20 border border-cyan-500/30 rounded text-cyan-400 text-sm">
                              {train.platform}
                            </span>
                          </td>
                          <td className="py-3 px-4">
                            <span className={`text-sm ${
                              train.status.includes('Delayed') ? 'text-red-400' : 'text-green-400'
                            }`}>
                              {train.status}
                            </span>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
                <div className="mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                  <p className="text-sm text-blue-300">
                    <strong>Note:</strong> Train information can be fetched from railway designated server system through standard protocols.
                    Configure the integration settings to connect with the live data source.
                  </p>
                </div>
              </div>
            )}
          </main>

          {/* Add Playlist Modal */}
          {showAddPlaylistModal && (
            <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
              <div className="bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-md">
                <h3 className="text-xl font-semibold mb-4">Create New Playlist</h3>
                <input
                  type="text"
                  value={newPlaylistName}
                  onChange={(e) => setNewPlaylistName(e.target.value)}
                  placeholder="Enter playlist name"
                  className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500 mb-4"
                  autoFocus
                />
                <div className="flex gap-3">
                  <button
                    onClick={() => setShowAddPlaylistModal(false)}
                    className="flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors"
                  >
                    Cancel
                  </button>
                  <button
                    onClick={handleAddPlaylist}
                    className="flex-1 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg transition-colors font-semibold"
                  >
                    Create
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Add Message Modal */}
          {showMessageModal && (
            <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
              <div className="bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-2xl">
                <h3 className="text-xl font-semibold mb-4">Add Special Message</h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm text-slate-400 mb-2">Message Text</label>
                    <textarea
                      value={newMessage.text || ''}
                      onChange={(e) => setNewMessage({ ...newMessage, text: e.target.value })}
                      placeholder="Enter message to display..."
                      className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      rows={3}
                    />
                  </div>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Language</label>
                      <select
                        value={newMessage.language}
                        onChange={(e) => setNewMessage({ ...newMessage, language: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      >
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                        <option value="regional">Regional</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Font Size</label>
                      <input
                        type="number"
                        value={newMessage.fontSize}
                        onChange={(e) => setNewMessage({ ...newMessage, fontSize: parseInt(e.target.value) })}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      />
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Color</label>
                      <input
                        type="color"
                        value={newMessage.color}
                        onChange={(e) => setNewMessage({ ...newMessage, color: e.target.value })}
                        className="w-full h-12 bg-slate-700 border border-slate-600 rounded-lg cursor-pointer"
                      />
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Display Type</label>
                      <select
                        value={newMessage.displayType}
                        onChange={(e) => setNewMessage({ ...newMessage, displayType: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      >
                        <option value="stay">Stay</option>
                        <option value="flash">Flash</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Duration (seconds)</label>
                      <input
                        type="number"
                        value={newMessage.duration}
                        onChange={(e) => setNewMessage({ ...newMessage, duration: parseInt(e.target.value) })}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      />
                    </div>
                    <div>
                      <label className="block text-sm text-slate-400 mb-2">Position</label>
                      <select
                        value={newMessage.position}
                        onChange={(e) => setNewMessage({ ...newMessage, position: e.target.value })}
                        className="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:outline-none focus:border-cyan-500"
                      >
                        <option value="bottom">Bottom</option>
                        <option value="top">Top</option>
                      </select>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <button
                      onClick={() => setShowMessageModal(false)}
                      className="flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors"
                    >
                      Cancel
                    </button>
                    <button
                      onClick={handleAddMessage}
                      className="flex-1 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg transition-colors font-semibold"
                    >
                      Add Message
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<VideoDisplaySoftware />);
  </script>
</body>
</html>
